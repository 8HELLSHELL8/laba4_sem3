{"ast":null,"code":"var _jsxFileName = \"/home/anton/laba4/frontend/src/pages/Profile.js\",\n  _s = $RefreshSig$();\n// Profile.js\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\n// useNavigate is not used directly for logout here anymore, but can be kept if used for other purposes\n// import { useNavigate } from 'react-router-dom';\nimport '../css/Profile.css'; // Ensure this CSS file exists and is styled\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Profile = () => {\n  _s();\n  const [currentUser, setCurrentUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  // const navigate = useNavigate(); // Keep if used for other navigation from profile\n\n  useEffect(() => {\n    const fetchUserProfile = async () => {\n      setLoading(true);\n      setError('');\n      try {\n        const response = await axios.get('http://localhost:5000/api/protected', {\n          withCredentials: true\n        });\n        if (response.data && response.data.user) {\n          setCurrentUser(response.data.user);\n        } else {\n          console.error(\"User data not found in response:\", response.data);\n          setError('Could not retrieve user profile information.');\n          // Potentially, redirect if user data is absolutely essential and missing\n          // For instance, if Layout fetched a minimal user, but profile needs more\n          // and fails to get it, it might indicate a desync.\n        }\n      } catch (err) {\n        if (err.response && err.response.status === 401) {\n          setError(\"Your session may have expired. Please log in again.\");\n          // In a more robust app, you might use a global context to trigger a logout\n          // or redirect to /auth from here using navigate('/auth', { replace: true });\n          // For now, the error message guides the user.\n        } else if (err.response) {\n          setError(err.response.data.message || 'An error occurred while loading profile data.');\n        } else if (err.request) {\n          setError('Could not connect to the server to load profile.');\n        } else {\n          setError('An unexpected error occurred while loading profile.');\n        }\n        console.error(\"Error loading profile:\", err);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchUserProfile();\n  }, []);\n\n  // Logout button and its handler are removed from here,\n  // as logout is now handled by the Layout's sidebar.\n\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile-container\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Loading profile...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 47\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 12\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile-container error-state\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 14\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }, this);\n  }\n  if (!currentUser) {\n    // This case implies loading finished, no specific error was caught by fetchUserProfile,\n    // but currentUser is still null. This could happen if the API at /api/protected\n    // didn't return a user object even with a 200 OK.\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile-container error-state\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Could not display profile information. User data might be missing.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 14\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 10\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"profile-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Profile\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"Name:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 10\n      }, this), \" \", currentUser.name]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"ID:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 10\n      }, this), \" \", currentUser.id]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 5\n  }, this);\n};\n_s(Profile, \"vSB9Nc0q2BGZUhjg31O+gFt0Mxs=\");\n_c = Profile;\nexport default Profile;\nvar _c;\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"names":["React","useState","useEffect","axios","jsxDEV","_jsxDEV","Profile","_s","currentUser","setCurrentUser","loading","setLoading","error","setError","fetchUserProfile","response","get","withCredentials","data","user","console","err","status","message","request","className","children","fileName","_jsxFileName","lineNumber","columnNumber","name","id","_c","$RefreshReg$"],"sources":["/home/anton/laba4/frontend/src/pages/Profile.js"],"sourcesContent":["// Profile.js\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\n// useNavigate is not used directly for logout here anymore, but can be kept if used for other purposes\n// import { useNavigate } from 'react-router-dom';\nimport '../css/Profile.css'; // Ensure this CSS file exists and is styled\n\nconst Profile = () => {\n  const [currentUser, setCurrentUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  // const navigate = useNavigate(); // Keep if used for other navigation from profile\n\n  useEffect(() => {\n    const fetchUserProfile = async () => {\n      setLoading(true);\n      setError('');\n      try {\n        const response = await axios.get('http://localhost:5000/api/protected', {\n          withCredentials: true,\n        });\n        if (response.data && response.data.user) {\n            setCurrentUser(response.data.user);\n        } else {\n            console.error(\"User data not found in response:\", response.data);\n            setError('Could not retrieve user profile information.');\n            // Potentially, redirect if user data is absolutely essential and missing\n            // For instance, if Layout fetched a minimal user, but profile needs more\n            // and fails to get it, it might indicate a desync.\n        }\n      } catch (err) {\n         if (err.response && err.response.status === 401) {\n           setError(\"Your session may have expired. Please log in again.\");\n           // In a more robust app, you might use a global context to trigger a logout\n           // or redirect to /auth from here using navigate('/auth', { replace: true });\n           // For now, the error message guides the user.\n         } else if (err.response) {\n          setError(err.response.data.message || 'An error occurred while loading profile data.');\n        } else if (err.request) {\n           setError('Could not connect to the server to load profile.');\n        } else {\n          setError('An unexpected error occurred while loading profile.');\n        }\n        console.error(\"Error loading profile:\", err);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchUserProfile();\n  }, []);\n\n  // Logout button and its handler are removed from here,\n  // as logout is now handled by the Layout's sidebar.\n\n  if (loading) {\n    return <div className=\"profile-container\"><p>Loading profile...</p></div>;\n  }\n\n  if (error) {\n    return (\n        <div className=\"profile-container error-state\">\n             <p>{error}</p>\n             {/* If you still want a logout option directly on this error page, \n               you'd need to pass down handleLogout from Layout via Outlet context \n               or re-implement a simpler version here.\n               However, the primary logout is in the sidebar.\n             */}\n        </div>\n    );\n  }\n\n  if (!currentUser) {\n     // This case implies loading finished, no specific error was caught by fetchUserProfile,\n     // but currentUser is still null. This could happen if the API at /api/protected\n     // didn't return a user object even with a 200 OK.\n     return (\n         <div className=\"profile-container error-state\">\n             <p>Could not display profile information. User data might be missing.</p>\n         </div>\n     );\n  }\n\n  return (\n    <div className=\"profile-container\">\n      <h2>Profile</h2>\n      <p><strong>Name:</strong> {currentUser.name}</p>\n      <p><strong>ID:</strong> {currentUser.id}</p>\n      {/* Add other user details here */}\n      {/* Example: <p><strong>Email:</strong> {currentUser.email}</p> */}\n      {/* Logout button removed from here */}\n    </div>\n  );\n};\n\nexport default Profile;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}